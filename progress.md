# WaitWiki 开发进度

## 当前版本
V1.3.3

## 最新更新 (2025-01-23)

### 批量更新和Wikipedia优先策略
- **批量更新机制**：每10次点击自动批量更新10条内容，避免频繁API调用
- **Wikipedia优先策略**：目标缓存60条Wikipedia内容，其他类型每种8条
- **智能缓存管理**：缓存大小100张，优先保证Wikipedia内容丰富度
- **防重复更新**：30秒内不重复批量更新，避免过度请求

### 技术优化
- **点击计数器**：记录用户点击次数，触发批量更新
- **类型统计**：实时统计各类型缓存数量，智能补充
- **请求间隔控制**：Wikipedia请求间隔500ms，其他类型300ms
- **预加载优化**：优先预加载Wikipedia，确保内容丰富度

### 用户体验提升
- **内容丰富度提升**：Wikipedia内容占比60%，提供更丰富的知识
- **响应速度优化**：减少单次API调用，提高整体响应速度
- **网络友好**：批量更新减少网络请求频率，更稳定
- **智能补充**：自动检测缓存不足，智能补充内容

### 数据真相功能
- **数据来源**：整合多个权威数据源，确保信息准确性
- **实时更新**：数据每小时自动同步，保持最新状态
- **多维度验证**：从不同角度验证数据，减少错误
- **用户反馈**：收集用户反馈，持续优化数据质量

## 历史版本

### V1.3.3 - 数据真相功能 (2025-01-23)
- **Factfulness理念**：基于Hans Rosling的Factfulness理念，展示与直觉相反的真实数据
- **全球发展数据**：涵盖贫困、健康、教育、技术、环境等8个关键领域的全球发展趋势
- **权威数据源**：基于世界银行、联合国、WHO、国际电信联盟等权威机构的最新数据
- **认知纠偏**：通过数据展示世界如何变得更好，纠正常见的悲观认知偏差
- **本地内容库**：8条高质量数据真相内容，确保网络不稳定时也能正常显示

### V1.3.2 - 批量更新和Wikipedia优先策略 (2025-01-23)
- **批量更新机制**：每10次点击自动批量更新10条内容，避免频繁API调用
- **Wikipedia优先策略**：目标缓存60条Wikipedia内容，其他类型每种8条
- **智能缓存管理**：缓存大小100张，优先保证Wikipedia内容丰富度
- **防重复更新**：30秒内不重复批量更新，避免过度请求

### V1.3.1 - 缓存优化和内容丰富化 (2025-01-23)
- 本地备用内容库：添加48条高质量本地内容，减少API依赖
- 智能缓存策略：缓存大小从100增加到200张，预加载数量从3增加到5张
- 内容相似度去重：新增内容关键词去重机制，防止相似内容重复显示
- API失败容错：API失败时自动切换到本地内容，确保内容连续性

### V1.3.0 - 智能推荐系统 (2025-01-23)
- 用户偏好学习：基于用户交互自动学习内容类型偏好
- 智能内容推荐：70%概率推荐用户偏好类型，30%概率保持多样性
- 内容质量评估：自动过滤低质量内容，提升用户体验
- 性能监控统计：实时监控API调用性能，优化响应时间

### V1.2.1 - 错误修复 (2025-01-23)
- 修复重复率过高问题：改进防重复算法，使用Set记录最近20张卡片
- 修复扩展上下文失效错误：在saveGlobalCache中检查chrome.runtime.id
- 修复API网络错误：为所有API调用添加5秒超时处理
- 修复面板分类显示：移除所有内容类型标签中的emoji

### V1.2 - 多API集成 (2025-01-23)
- 新增4个API：生活建议、猫咪趣闻、知识问答、鸡尾酒谱
- 添加内容类型控制面板，用户可自由开关各API
- 增强安全性：修复XSS漏洞，使用安全的DOM操作
- 改进内容轮换算法，避免连续显示相同卡片

### V1.1 - 基础功能完善 (2025-01-22)
- 实现维基百科、名言、趣闻三种内容类型
- 添加缓存机制和智能预加载
- 支持深色模式和响应式设计
- 完善错误处理和重试机制

### V1.0 - 初始版本 (2025-01-21)
- 基础卡片显示功能
- 维基百科API集成
- 简单的设置面板

## V1.4 计划功能
- 添加内容分享功能
- 支持更多语言
- 离线内容缓存
- 用户反馈系统
- 内容收藏功能
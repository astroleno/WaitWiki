# 知涟 · WaitWiki  

> 等待，不是浪费，而是遇见知识的涟漪。  

**知涟 · WaitWiki** 是一个 Chrome 扩展插件，在 AI 对话等待期间展示有趣的知识卡片。  
每次按 Enter 键发送消息时，都会显示不同的知识内容，让等待变成发现。  

---

## 特性

- **智能切换**：每次按 Enter 键显示不同的知识卡片
- **百科直链**：点击卡片即可跳转 Wikipedia 深入阅读  
- **多源内容**：集成 Wikipedia、名言、趣闻等多种知识源
- **轻盈设计**：卡片风格简洁，支持淡入淡出动画，不干扰主要对话  
- **深色模式**：支持手动和自动深色模式切换
- **丰富配置**：卡片大小、展示时长、显示设置等可自定义
- **智能缓存**：100张卡片缓存池，1小时失败记录清理
- **多语言支持**：支持中英文等多语言维基内容

---

## 安装与使用

### Chrome 扩展安装
1. 下载或克隆本仓库
2. 打开 Chrome 浏览器
3. 进入 `扩展程序` 页面 (chrome://extensions/)
4. 打开 `开发者模式`
5. 点击 `加载已解压的扩展程序`
6. 选择 WaitWiki 文件夹

### 权限说明
本扩展需要以下权限：
- **activeTab**：仅在您激活标签页时访问当前页面，用于检测AI对话平台
- **storage**：保存您的设置和缓存数据，所有数据仅存储在本地
- **host_permissions**：访问公开的知识API，获取百科、名言、趣闻等内容

所有数据仅存储在您的浏览器本地，不会上传到任何服务器。详细隐私政策请查看 [privacy.md](privacy.md)。

### 使用方法
1. 在支持的 AI 平台（ChatGPT、Claude、Gemini、Kimi 等）
2. 按 Enter 键发送消息时，WaitWiki 会自动显示知识卡片
3. 点击卡片链接可深入了解相关知识
4. 点击扩展图标可打开设置界面

### 支持的平台
- ChatGPT (chat.openai.com)
- Claude (claude.ai)
- Gemini (gemini.google.com)
- Kimi (kimi.ai, kimi.moonshot.cn)
- DeepSeek (chat.deepseek.com)
- Copilot (copilot.microsoft.com)
- Grok (grok.x.ai)
- 豆包 (doubao.com)
- 元宝 (yuanbao.tencent.com)

---

## 配置选项

### 基础设置
- **启用知涟**：开关插件功能
- **显示来源信息**：是否显示卡片来源
- **显示圆形图标**：是否显示右下角的圆形图标
- **暗夜模式**：手动切换深色模式

### 展示设置
- **展示时长**：10秒 / 20秒 / 常驻
- **卡片大小**：小 / 中 / 大

### 内容类型
- **维基百科**：随机百科知识
- **名言金句**：每日励志名言
- **数字趣闻**：数字趣闻和小知识
- **生活贴士**：实用生活建议
- **猫咪趣闻**：关于猫咪的有趣事实
- **知识问答**：趣味知识问答
- **经典调酒**：世界各地的经典鸡尾酒配方和制作方法
- **数据真相**：基于Factfulness理念的全球发展数据，展示世界如何变得更好（300条精选数据，涵盖全球性、区域性和权威机构数据）

---

## 技术架构

### 数据源
- **Wikipedia REST API**：随机摘要、每日精选、历史上的今天
- **Zen Quotes API**：励志名言
- **Quotable API**：备用名言源
- **Numbers API**：数字趣闻
- **Advice Slip API**：生活建议
- **Cat Facts API**：猫咪趣闻
- **The Trivia API**：知识问答
- **TheCocktailDB API**：鸡尾酒配方
- **Gapminder基金会**：全球发展数据（30%）
- **联合国及其专门机构**：权威统计数据（50%）
- **其他国际权威机构**：专业领域数据（18%）

### 核心技术
- **Chrome Extension API**：扩展程序框架
- **RESTful API**：数据获取
- **Local Storage**：本地缓存
- **CSS3 动画**：流畅的视觉效果
- **响应式设计**：适配各种屏幕尺寸

### 智能特性
- **防重复算法**：基于标题避免重复显示
- **失败处理**：API失败时的降级策略
- **缓存管理**：智能缓存池和清理机制
- **预加载**：提前加载内容保证流畅体验

---

## 版本历史

### V1.2 (2025-08-23)
- ✅ 新增4个API数据源（生活贴士、猫咪趣闻、知识问答、鸡尾酒谱）
- ✅ 添加内容类型控制面板，可单独开启/关闭各API
- ✅ 优化内容轮换算法，避免重复显示
- ✅ 增强安全性，防止XSS攻击
- ✅ 改进定时器管理，防止内存泄漏

### V1.1 (2025-08-23)
- ✅ 修复激活切换模式问题
- ✅ 实现每次Enter显示不同卡片
- ✅ 优化卡片选择算法
- ✅ 改进预加载机制

### V1.0 (2025-08-23)
- ✅ 完整的 WaitWiki 架构
- ✅ Wikipedia API 集成
- ✅ 名言 API 集成  
- ✅ 趣闻 API 集成
- ✅ 智能缓存机制
- ✅ 多语言支持
- ✅ 完整的配置系统
- ✅ 深色模式支持

---

## 路线图

### V1.3 计划
- [ ] 添加更多内容类型（新闻、科技、历史事件等）
- [ ] 改进错误处理和用户反馈
- [ ] 添加卡片收藏功能
- [ ] 优化移动端体验
- [ ] 添加内容分享功能

### 长期规划
- [ ] 多语言支持扩展
- [ ] 用户自定义内容源
- [ ] 数据分析和统计
- [ ] 社区分享功能

---

## 贡献

欢迎提交 Issue 和 Pull Request，一起让"等待"更有趣。

### 开发环境
1. 克隆仓库
2. 修改代码后重新加载扩展
3. 查看控制台日志调试

---

## 许可证

- **代码**：MIT License
- **内容来源**：Wikipedia (CC BY-SA 3.0)
- **名言内容**：Zen Quotes API, Quotable API
- **请在产品中保留原始来源标注**

---

## 命名含义

- **中文**：知涟 —— 知识泛起的涟漪
- **英文**：WaitWiki —— 等待时的维基

---

## 联系方式

如有问题或建议，请通过以下方式联系：
- GitHub Issues
- 邮件：yourname@example.com

---

**让每一次等待都成为知识的发现之旅** 🌊
